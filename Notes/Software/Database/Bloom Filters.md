
میاد مقدار مارو هش میکنه و توی یه خونه میزاره. مقدار اولیه اش ۶۴ بایته و اگر توی اون خونه عدد ۱ باشه یعنی اون توی دیتابیس وجود داره یا یکی هش اش شبیه اشه وجود داره، پس:

✅ **اگه بگه مقدار نیست، ۱۰۰٪ مطمئنیم که واقعاً نیست.**  
❌ **اگه بگه مقدار هست، شاید اشتباه کنه و مقدار واقعی توی دیتابیس نباشه.** (یعنی **False Positive** داره)

🔹 به درد جاهایی می‌خوره که **می‌خوایم سریع چک کنیم یه چیزی توی دیتابیس هست یا نه، بدون اینکه کل جدول رو بگردیم.**

---

### **🔢 آیا ۶۴ بایت برای یه جدول ۱ میلیونی کمه؟**

ببین، **Bloom Filter حافظه رو فوق‌العاده بهینه مصرف می‌کنه، اما دقتش وابسته به سایزشه!**  
🔹 اگه خیلی کوچیک باشه (مثلاً ۶۴ بایت)، احتمال خطای False Positive بالا می‌ره.  

---

### 📏 فرمول برای اندازه‌ی Bloom Filter چیه؟

دو تا چیز رو باید در نظر بگیری:

1️⃣یک: **n** = تعداد آیتم‌هایی که قراره ذخیره کنیم (مثلاً ۱ میلیون رکورد)  
2️⃣ دو: **p** = احتمال خطای False Positive (مثلاً ۱٪)

فرمول اندازه‌ی بیت‌ها (m) اینه:

$$
m = -\frac{n \times \ln(p)}{(\ln(2))^2}

$$

 **ا`ln(x)` یعنی لگاریتم به پایه e**

- ا**`e`** یه عدد خاصه که حدوداً برابر با **۲.۷۱۸۲۸** هست.
- وقتی می‌گیم **`ln(x)`**، یعنی لگاریتم عدد x به پایه‌ی e رو حساب می‌کنیم.
- ا**`ln(2)`** هم لگاریتم طبیعی عدد 2 هست که تقریباً **0.693** میشه.

### **پس فرمول به این صورت می‌شه:**

$$
m = -\frac{n \times \ln(p)}{(\ln(2))^2}
$$

$$
m = -\frac{1,000,000 \times (-4.6)}{0.48}
$$

$$
m = \frac{4,600,000}{0.48} = 9,583,333 \text{ bit}
$$
و در نهایت
$$
size = 9,583,333 / 8 / 1024 / 1024
$$
👀 **یعنی اگه n = 1,000,000 باشه و بخوایم p = 0.01 (1%) باشه، حدود 1.2 مگابایت حافظه لازمه!**
❌ ولی اگه فقط ۶۴ بایت باشه، **False Positive شدیداً زیاد می‌شه و خیلی غیرقابل‌اعتماد می‌شه.**



دیتابیس cassandara به صورت builtin تو خودش داره اینو